<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Full App Test</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background: #1a1a1a;
            color: #fff;
        }
        .test-section {
            margin: 20px 0;
            padding: 15px;
            border: 1px solid #333;
            border-radius: 5px;
            background: #2a2a2a;
        }
        .result {
            background: #333;
            padding: 10px;
            border-radius: 3px;
            margin: 10px 0;
            white-space: pre-wrap;
            font-family: monospace;
            font-size: 12px;
            max-height: 300px;
            overflow-y: auto;
        }
        button {
            background: #4a90e2;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            margin: 5px;
        }
        button:hover {
            background: #357abd;
        }
        .success { color: #4caf50; }
        .error { color: #f44336; }
        .warning { color: #ff9800; }
        .chart-container {
            width: 100%;
            height: 400px;
            border: 1px solid #333;
            margin-top: 10px;
            background: #1a1a1a;
        }
    </style>
</head>
<body>
    <h1>üîç Full App Test</h1>
    
    <div class="test-section">
        <h3>Test 1: React and App Components</h3>
        <button onclick="testReactComponents()">Test React Components</button>
        <div id="reactResult" class="result"></div>
    </div>

    <div class="test-section">
        <h3>Test 2: Chart Component</h3>
        <button onclick="testChartComponent()">Test Chart Component</button>
        <div id="chartResult" class="result"></div>
        <div id="chartContainer" class="chart-container"></div>
    </div>

    <div class="test-section">
        <h3>Test 3: Crypto Data Hook</h3>
        <button onclick="testCryptoDataHook()">Test Crypto Data Hook</button>
        <div id="hookResult" class="result"></div>
    </div>

    <div class="test-section">
        <h3>Test 4: Astronomical Events</h3>
        <button onclick="testAstronomicalEvents()">Test Astronomical Events</button>
        <div id="astroResult" class="result"></div>
    </div>

    <script type="module">
        // Test 1: React and App Components
        window.testReactComponents = async function() {
            const resultDiv = document.getElementById('reactResult');
            resultDiv.innerHTML = 'Testing...';
            
            try {
                // –ü–æ–ø—Ä–æ–±—É–µ–º –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å React
                const React = await import('react');
                resultDiv.innerHTML = '<span class="success">‚úÖ SUCCESS: React imported!</span>\n' +
                    'React: ' + typeof React + '\n' +
                    'createElement: ' + typeof React.createElement;
                
                // –ü–æ–ø—Ä–æ–±—É–µ–º –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å App
                try {
                    const App = await import('/src/App.tsx');
                    resultDiv.innerHTML += '\n<span class="success">‚úÖ SUCCESS: App component imported!</span>\n' +
                        'App: ' + typeof App.default;
                } catch (appError) {
                    resultDiv.innerHTML += '\n<span class="warning">‚ö†Ô∏è WARNING: App component import failed</span>\n' +
                        'Error: ' + appError.message;
                }
            } catch (error) {
                resultDiv.innerHTML = '<span class="error">‚ùå ERROR: React import failed</span>\n' +
                    'Error: ' + error.message + '\n' +
                    'Stack: ' + error.stack;
            }
        };

        // Test 2: Chart Component
        window.testChartComponent = async function() {
            const resultDiv = document.getElementById('chartResult');
            const container = document.getElementById('chartContainer');
            resultDiv.innerHTML = 'Testing...';
            
            try {
                // –ü–æ–ø—Ä–æ–±—É–µ–º –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å ChartComponent
                const { ChartComponent } = await import('/src/Charting/Presentation/components/ChartComponent.tsx');
                resultDiv.innerHTML = '<span class="success">‚úÖ SUCCESS: ChartComponent imported!</span>\n' +
                    'ChartComponent: ' + typeof ChartComponent;
                
                // –ü–æ–ø—Ä–æ–±—É–µ–º —Å–æ–∑–¥–∞—Ç—å React —ç–ª–µ–º–µ–Ω—Ç
                const React = await import('react');
                const chartElement = React.createElement(ChartComponent, {
                    symbol: 'BTCUSDT',
                    timeframe: '1h',
                    height: 400,
                    cryptoData: [
                        {
                            symbol: 'BTCUSDT',
                            time: '2024-01-01T00:00:00Z',
                            open: 100,
                            high: 105,
                            low: 95,
                            close: 102,
                            volume: 1000
                        }
                    ],
                    astronomicalEvents: []
                });
                
                resultDiv.innerHTML += '\n<span class="success">‚úÖ SUCCESS: Chart element created!</span>\n' +
                    'Element type: ' + chartElement.type + '\n' +
                    'Props: ' + JSON.stringify(chartElement.props, null, 2);
                
            } catch (error) {
                resultDiv.innerHTML = '<span class="error">‚ùå ERROR: ChartComponent test failed</span>\n' +
                    'Error: ' + error.message + '\n' +
                    'Stack: ' + error.stack;
            }
        };

        // Test 3: Crypto Data Hook
        window.testCryptoDataHook = async function() {
            const resultDiv = document.getElementById('hookResult');
            resultDiv.innerHTML = 'Testing...';
            
            try {
                // –ü–æ–ø—Ä–æ–±—É–µ–º –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å useCryptoData
                const { useCryptoData } = await import('/src/hooks/useCryptoData.ts');
                resultDiv.innerHTML = '<span class="success">‚úÖ SUCCESS: useCryptoData imported!</span>\n' +
                    'useCryptoData: ' + typeof useCryptoData;
                
                // –ü–æ–ø—Ä–æ–±—É–µ–º –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å DI –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
                const { DependencyContainer } = await import('/src/Shared/infrastructure/DependencyContainer.ts');
                const { CryptoDataDependencyConfig } = await import('/src/CryptoData/Infrastructure/config/DependencyConfig.ts');
                
                const container = DependencyContainer.getInstance();
                CryptoDataDependencyConfig.configure(container);
                
                resultDiv.innerHTML += '\n<span class="success">‚úÖ SUCCESS: DI container configured!</span>\n' +
                    'Container: ' + typeof container + '\n' +
                    'Has GetCryptoDataUseCase: ' + container.has('GetCryptoDataUseCase');
                
            } catch (error) {
                resultDiv.innerHTML = '<span class="error">‚ùå ERROR: Crypto Data Hook test failed</span>\n' +
                    'Error: ' + error.message + '\n' +
                    'Stack: ' + error.stack;
            }
        };

        // Test 4: Astronomical Events
        window.testAstronomicalEvents = async function() {
            const resultDiv = document.getElementById('astroResult');
            resultDiv.innerHTML = 'Testing...';
            
            try {
                // –ü–æ–ø—Ä–æ–±—É–µ–º –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å useAstronomicalEvents
                const { useAstronomicalEvents } = await import('/src/hooks/useAstronomicalEvents.ts');
                resultDiv.innerHTML = '<span class="success">‚úÖ SUCCESS: useAstronomicalEvents imported!</span>\n' +
                    'useAstronomicalEvents: ' + typeof useAstronomicalEvents;
                
                // –ü–æ–ø—Ä–æ–±—É–µ–º –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å —Å—Ç–∞—Ä—ã–π —Å–µ—Ä–≤–∏—Å
                const { getAstronomicalEvents } = await import('/src/services/astronomicalEvents.ts');
                resultDiv.innerHTML += '\n<span class="success">‚úÖ SUCCESS: Old astronomical service imported!</span>\n' +
                    'getAstronomicalEvents: ' + typeof getAstronomicalEvents;
                
                // –ü–æ–ø—Ä–æ–±—É–µ–º –ø–æ–ª—É—á–∏—Ç—å —Å–æ–±—ã—Ç–∏—è
                const events = getAstronomicalEvents(
                    new Date(Date.now() - 365 * 24 * 60 * 60 * 1000),
                    new Date(Date.now() + 90 * 24 * 60 * 60 * 1000)
                );
                
                resultDiv.innerHTML += '\n<span class="success">‚úÖ SUCCESS: Astronomical events generated!</span>\n' +
                    'Events count: ' + events.length + '\n' +
                    'First event: ' + JSON.stringify(events[0], null, 2);
                
            } catch (error) {
                resultDiv.innerHTML = '<span class="error">‚ùå ERROR: Astronomical Events test failed</span>\n' +
                    'Error: ' + error.message + '\n' +
                    'Stack: ' + error.stack;
            }
        };
    </script>
</body>
</html> 